setwd (source_wd)
# end time
end_time <- Sys.time ()
print (paste0 ("end time = ", end_time))
print (Sys.time () - start_time)
# ------------------------------------------------------------------------------
R.Version()
version()
R.version.string
version()
R.version.string
setwd("~/Documents/GitHub/vaccine_amr/code")
R.version.string
library (readr)
library (readxl)
library (dplyr)
library (ggplot2)
library (reshape2)
library (tidyverse)
library (scales)
library (data.table)
library (ggplot2)
library (rriskDistributions)
library (msm)
library (formattable)
library (patchwork)
library (Cairo)
setwd("~/Documents/GitHub/vaccine_amr/code")
# load libraries
library (readr)
library (readxl)
library (dplyr)
library (ggplot2)
library (reshape2)
library (tidyverse)
library (scales)
library (data.table)
library (ggplot2)
library (rriskDistributions)
library (msm)
library (formattable)
library (patchwork)
library (Cairo)
setwd("~/Documents/GitHub/vaccine_amr/code")
# load libraries
library (readr)
library (readxl)
library (dplyr)
library (ggplot2)
library (reshape2)
library (tidyverse)
library (scales)
library (data.table)
library (ggplot2)
library (rriskDistributions)
library (msm)
library (formattable)
library (patchwork)
library (Cairo)
setwd("~/Documents/GitHub/vaccine_amr/code")
library (readr)
library (readxl)
library (dplyr)
library (ggplot2)
library (reshape2)
library (tidyverse)
library (scales)
library (data.table)
library (ggplot2)
library (rriskDistributions)
library (msm)
library (formattable)
library (patchwork)
library (Cairo)
library(Cairo)
install.packages
install.packages("Cairo")
library (Cairo)
install.packages("Cairo", type = "source")
library (Cairo)
install.packages("installr")
library(installr)
updateR()
install.packages("Cairo", dependencies = TRUE)
library (Cairo)
brew install libxrender
setwd("~/Documents/GitHub/vaccine_amr/code")
library (readr)
library (readxl)
library (dplyr)
library (ggplot2)
library (reshape2)
library (tidyverse)
library (scales)
library (data.table)
library (ggplot2)
library (rriskDistributions)
library (msm)
library (formattable)
library (patchwork)
library (Cairo)
library (webr)
# remove all objects from workspace
rm (list = ls ())
# start time
start_time <- Sys.time ()
print (paste0 ("start time = ", start_time))
# source functions
source ("functions.R")
# move to base directory (run code from source directory)
source_wd <- getwd ()
setwd ("../")
setwd("~/Documents/GitHub/vaccine_amr/code")
library (readr)
library (readxl)
library (dplyr)
library (ggplot2)
library (reshape2)
library (tidyverse)
library (scales)
library (data.table)
library (ggplot2)
library (rriskDistributions)
library (msm)
library (formattable)
library (patchwork)
library (Cairo)
library (webr)
# remove all objects from workspace
rm (list = ls ())
# start time
start_time <- Sys.time ()
print (paste0 ("start time = ", start_time))
# source functions
source ("functions.R")
# move to base directory (run code from source directory)
source_wd <- getwd ()
setwd ("../")
existing_vaccine_coverage (year = "2019",
hib_coverage_file = file.path("tables", "hib_coverage_2019.csv"),
pcv_coverage_file = file.path("tables", "pcv_coverage_2019.csv"))
existing_vaccine_coverage (year = "2018",
hib_coverage_file = file.path("tables", "hib_coverage_2018.csv"),
pcv_coverage_file = file.path("tables", "pcv_coverage_2018.csv"))
setwd("~/Documents/GitHub/vaccine_amr/code")
library (readr)
library (readxl)
library (dplyr)
library (ggplot2)
library (reshape2)
library (tidyverse)
library (scales)
library (data.table)
library (ggplot2)
library (rriskDistributions)
library (msm)
library (formattable)
library (patchwork)
library (Cairo)
library (webr)
# remove all objects from workspace
rm (list = ls ())
# start time
start_time <- Sys.time ()
print (paste0 ("start time = ", start_time))
# source functions
source ("functions.R")
# move to base directory (run code from source directory)
source_wd <- getwd ()
setwd ("../")
# ------------------------------------------------------------------------------
## IHME data on the AMR burden ##
# WHO regions: Africa, Americas, Eastern Mediterranean, Europe, South-East Asia,
#              Western Pacific, Unclassified
# year: 2019
# sex: both
# ------------------------------------------------------------------------------
# estimate regional vaccine coverage for existing vaccines in 2018 and 2019
# - HIB vaccine, PCV
existing_vaccine_coverage (year = "2019",
hib_coverage_file = file.path("tables", "hib_coverage_2019.csv"),
pcv_coverage_file = file.path("tables", "pcv_coverage_2019.csv"))
existing_vaccine_coverage (year = "2018",
hib_coverage_file = file.path("tables", "hib_coverage_2018.csv"),
pcv_coverage_file = file.path("tables", "pcv_coverage_2018.csv"))
# ------------------------------------------------------------------------------
# create data table of AMR burden (deaths) classified
# by pathogen, WHO region, disease presentation, and age groups
options(scipen=999)
death_burden_dt <- read_excel(file.path("data", "IHME_AMR_burden.xlsx"),
col_names = FALSE)
death_burden_dt <- create_burden_table(AMR_burden  = death_burden_dt,
burden_file = file.path ("tables", "AMR_death_burden.csv"))
# create data table of AMR burden (DALYs) classified
# by pathogen, WHO region, disease presentation, and age groups
daly_burden_dt <- read_excel(file.path("data", "IHME_AMR_burden_DALYs.xlsx"),
col_names = FALSE)
daly_burden_dt <- create_burden_table(AMR_burden = daly_burden_dt,
burden_file = file.path ("tables", "AMR_daly_burden.csv"))
# ------------------------------------------------------------------------------
# create data table of vaccine profile
vaccine_profile_file <-
read_excel(file.path("data", "Vaccine_profile_assumptions.xlsx"),
sheet = "Vaccine profile _ input")
vaccine_profile_dt <-
create_vaccine_profile_table(vaccine_profile = vaccine_profile_file,
vaccine_profile_file = file.path("tables", "vaccine_profile.csv"))
# ------------------------------------------------------------------------------
# create combined table: vaccine profile + disease burden (deaths)
# create separate burden file for health burdens attributable to AMR and associated with AMR
combined_dt <-
create_combined_table(death_burden_dt          = death_burden_dt,
vaccine_profile_dt       = vaccine_profile_dt,
susceptible_burden_file  = file.path("tables", "susceptible_burden.csv"),
attributable_burden_file = file.path("tables", "attributable_burden.csv"),
associated_burden_file   = file.path("tables", "associated_burden.csv"))
# create combined table: vaccine profile + disease burden (DALYs)
# create separate burden file for health burdens attributable to AMR and associated with AMR
daly_combined_dt <-
create_combined_table(death_burden_dt          = daly_burden_dt,
vaccine_profile_dt       = vaccine_profile_dt,
susceptible_burden_file  = file.path("tables", "daly_susceptible_burden.csv"),
attributable_burden_file = file.path("tables", "daly_attributable_burden.csv"),
associated_burden_file   = file.path("tables", "daly_associated_burden.csv"))
# ------------------------------------------------------------------------------
# estimate pre-vaccine burden for existing vaccines -- HIB vaccine & PCV
estimate_prevaccination_burden(
burden_input = read_csv(file.path("tables", "associated_burden.csv")),
burden_file  = file.path("tables", "associated_burden.csv"))
# estimate pre-vaccine burden for existing vaccines -- HIB vaccine & PCV
estimate_prevaccination_burden(
burden_input = read_csv(file.path("tables", "associated_burden.csv")),
burden_file  = file.path("tables", "associated_burden.csv"))
setwd("~/Documents/GitHub/vaccine_amr/code")
# load libraries
library (readr)
library (readxl)
library (dplyr)
library (ggplot2)
library (reshape2)
library (tidyverse)
library (scales)
library (data.table)
library (ggplot2)
library (rriskDistributions)
library (msm)
library (formattable)
library (patchwork)
library (Cairo)
library (webr)
# remove all objects from workspace
rm (list = ls ())
# start time
start_time <- Sys.time ()
print (paste0 ("start time = ", start_time))
# source functions
source ("functions.R")
# move to base directory (run code from source directory)
source_wd <- getwd ()
setwd ("../")
# ------------------------------------------------------------------------------
## IHME data on the AMR burden ##
# WHO regions: Africa, Americas, Eastern Mediterranean, Europe, South-East Asia,
#              Western Pacific, Unclassified
# year: 2019
# sex: both
# ------------------------------------------------------------------------------
# estimate regional vaccine coverage for existing vaccines in 2018 and 2019
# - HIB vaccine, PCV
existing_vaccine_coverage (year = "2019",
hib_coverage_file = file.path("tables", "hib_coverage_2019.csv"),
pcv_coverage_file = file.path("tables", "pcv_coverage_2019.csv"))
existing_vaccine_coverage (year = "2018",
hib_coverage_file = file.path("tables", "hib_coverage_2018.csv"),
pcv_coverage_file = file.path("tables", "pcv_coverage_2018.csv"))
# ------------------------------------------------------------------------------
# create data table of AMR burden (deaths) classified
# by pathogen, WHO region, disease presentation, and age groups
options(scipen=999)
death_burden_dt <- read_excel(file.path("data", "IHME_AMR_burden.xlsx"),
col_names = FALSE)
death_burden_dt <- create_burden_table(AMR_burden  = death_burden_dt,
burden_file = file.path ("tables", "AMR_death_burden.csv"))
# create data table of AMR burden (DALYs) classified
# by pathogen, WHO region, disease presentation, and age groups
daly_burden_dt <- read_excel(file.path("data", "IHME_AMR_burden_DALYs.xlsx"),
col_names = FALSE)
daly_burden_dt <- create_burden_table(AMR_burden = daly_burden_dt,
burden_file = file.path ("tables", "AMR_daly_burden.csv"))
# ------------------------------------------------------------------------------
# create data table of vaccine profile
vaccine_profile_file <-
read_excel(file.path("data", "Vaccine_profile_assumptions.xlsx"),
sheet = "Vaccine profile _ input")
vaccine_profile_dt <-
create_vaccine_profile_table(vaccine_profile = vaccine_profile_file,
vaccine_profile_file = file.path("tables", "vaccine_profile.csv"))
# ------------------------------------------------------------------------------
# create combined table: vaccine profile + disease burden (deaths)
# create separate burden file for health burdens attributable to AMR and associated with AMR
combined_dt <-
create_combined_table(death_burden_dt          = death_burden_dt,
vaccine_profile_dt       = vaccine_profile_dt,
susceptible_burden_file  = file.path("tables", "susceptible_burden.csv"),
attributable_burden_file = file.path("tables", "attributable_burden.csv"),
associated_burden_file   = file.path("tables", "associated_burden.csv"))
# create combined table: vaccine profile + disease burden (DALYs)
# create separate burden file for health burdens attributable to AMR and associated with AMR
daly_combined_dt <-
create_combined_table(death_burden_dt          = daly_burden_dt,
vaccine_profile_dt       = vaccine_profile_dt,
susceptible_burden_file  = file.path("tables", "daly_susceptible_burden.csv"),
attributable_burden_file = file.path("tables", "daly_attributable_burden.csv"),
associated_burden_file   = file.path("tables", "daly_associated_burden.csv"))
# ------------------------------------------------------------------------------
# estimate pre-vaccine burden for existing vaccines -- HIB vaccine & PCV
estimate_prevaccination_burden(
burden_input = read_csv(file.path("tables", "associated_burden.csv")),
burden_file  = file.path("tables", "associated_burden.csv"))
estimate_prevaccination_burden(
burden_input = read_csv(file.path("tables", "attributable_burden.csv")),
burden_file  = file.path("tables", "attributable_burden.csv"))
estimate_prevaccination_burden(
burden_input = read_csv(file.path("tables", "susceptible_burden.csv")),
burden_file  = file.path("tables", "susceptible_burden.csv"))
estimate_prevaccination_burden(
burden_input = read_csv(file.path("tables", "daly_associated_burden.csv")),
burden_file  = file.path("tables", "daly_associated_burden.csv"))
estimate_prevaccination_burden(
burden_input = read_csv(file.path("tables", "daly_attributable_burden.csv")),
burden_file  = file.path("tables", "daly_attributable_burden.csv"))
estimate_prevaccination_burden(
burden_input = read_csv(file.path("tables", "daly_susceptible_burden.csv")),
burden_file  = file.path("tables", "daly_susceptible_burden.csv"))
pathogenlist_death <- unique(death_burden_dt$Pathogen)
pathogenlist_daly  <- unique(daly_burden_dt$Pathogen)
pathogenlist_death
pathogenlist_death
pathogenlist_daly
create_burden_by_pathogen_graph <- function(pathogen,
input_data,
ylabel,
burden_type){
burden_data <- input_data[input_data$Pathogen == pathogen, ]
burden_data <- burden_data %>%
group_by(Pathogen, WHO_region, Age_group) %>%
summarise(Associated_resistant_mean=sum(Associated_resistant_mean), .groups = 'drop')
ggplot(burden_data, aes(x=Age_group)) +
geom_line(aes(y=Associated_resistant_mean, group=WHO_region, colour=WHO_region)) +
ylab(paste(ylabel)) +
xlab("Age Group") +
ggtitle(paste(pathogen)) +
theme_classic() +
theme(plot.title = element_text(hjust = 0.5))
} # end of function -- create_burden_by_pathogen_graph
lapply(pathogenlist_death, create_burden_by_pathogen_graph,
input_data = combined_dt, ylabel = "Number of Death Associated with AMR",
burden_type = "deaths")
setwd("~/Documents/GitHub/vaccine_amr/code")
library (readr)
library (readxl)
library (dplyr)
library (ggplot2)
library (reshape2)
library (tidyverse)
library (scales)
library (data.table)
library (ggplot2)
library (rriskDistributions)
library (msm)
library (formattable)
library (patchwork)
library (Cairo)
library (webr)
# remove all objects from workspace
rm (list = ls ())
# start time
start_time <- Sys.time ()
print (paste0 ("start time = ", start_time))
# source functions
source ("functions.R")
# move to base directory (run code from source directory)
source_wd <- getwd ()
setwd ("../")
existing_vaccine_coverage (year = "2019",
hib_coverage_file = file.path("tables", "hib_coverage_2019.csv"),
pcv_coverage_file = file.path("tables", "pcv_coverage_2019.csv"))
existing_vaccine_coverage (year = "2018",
hib_coverage_file = file.path("tables", "hib_coverage_2018.csv"),
pcv_coverage_file = file.path("tables", "pcv_coverage_2018.csv"))
options(scipen=999)
death_burden_dt <- read_excel(file.path("data", "IHME_AMR_burden.xlsx"),
col_names = FALSE)
death_burden_dt <- create_burden_table(AMR_burden  = death_burden_dt,
burden_file = file.path ("tables", "AMR_death_burden.csv"))
# create data table of AMR burden (DALYs) classified
# by pathogen, WHO region, disease presentation, and age groups
daly_burden_dt <- read_excel(file.path("data", "IHME_AMR_burden_DALYs.xlsx"),
col_names = FALSE)
daly_burden_dt <- create_burden_table(AMR_burden = daly_burden_dt,
burden_file = file.path ("tables", "AMR_daly_burden.csv"))
vaccine_profile_file <-
read_excel(file.path("data", "Vaccine_profile_assumptions.xlsx"),
sheet = "Vaccine profile _ input")
vaccine_profile_dt <-
create_vaccine_profile_table(vaccine_profile = vaccine_profile_file,
vaccine_profile_file = file.path("tables", "vaccine_profile.csv"))
combined_dt <-
create_combined_table(death_burden_dt          = death_burden_dt,
vaccine_profile_dt       = vaccine_profile_dt,
susceptible_burden_file  = file.path("tables", "susceptible_burden.csv"),
attributable_burden_file = file.path("tables", "attributable_burden.csv"),
associated_burden_file   = file.path("tables", "associated_burden.csv"))
# create combined table: vaccine profile + disease burden (DALYs)
# create separate burden file for health burdens attributable to AMR and associated with AMR
daly_combined_dt <-
create_combined_table(death_burden_dt          = daly_burden_dt,
vaccine_profile_dt       = vaccine_profile_dt,
susceptible_burden_file  = file.path("tables", "daly_susceptible_burden.csv"),
attributable_burden_file = file.path("tables", "daly_attributable_burden.csv"),
associated_burden_file   = file.path("tables", "daly_associated_burden.csv"))
setwd("~/Documents/GitHub/vaccine_amr/code")
library (readr)
library (readxl)
library (dplyr)
library (ggplot2)
library (reshape2)
library (tidyverse)
library (scales)
library (data.table)
library (ggplot2)
library (rriskDistributions)
library (msm)
library (formattable)
library (patchwork)
library (Cairo)
library (webr)
# remove all objects from workspace
rm (list = ls ())
# start time
start_time <- Sys.time ()
print (paste0 ("start time = ", start_time))
# source functions
source ("functions.R")
# move to base directory (run code from source directory)
source_wd <- getwd ()
setwd ("../")
existing_vaccine_coverage (year = "2019",
hib_coverage_file = file.path("tables", "hib_coverage_2019.csv"),
pcv_coverage_file = file.path("tables", "pcv_coverage_2019.csv"))
existing_vaccine_coverage (year = "2018",
hib_coverage_file = file.path("tables", "hib_coverage_2018.csv"),
pcv_coverage_file = file.path("tables", "pcv_coverage_2018.csv"))
options(scipen=999)
death_burden_dt <- read_excel(file.path("data", "IHME_AMR_burden.xlsx"),
col_names = FALSE)
death_burden_dt <- create_burden_table(AMR_burden  = death_burden_dt,
burden_file = file.path ("tables", "AMR_death_burden.csv"))
# create data table of AMR burden (DALYs) classified
# by pathogen, WHO region, disease presentation, and age groups
daly_burden_dt <- read_excel(file.path("data", "IHME_AMR_burden_DALYs.xlsx"),
col_names = FALSE)
daly_burden_dt <- create_burden_table(AMR_burden = daly_burden_dt,
burden_file = file.path ("tables", "AMR_daly_burden.csv"))
vaccine_profile_file <-
read_excel(file.path("data", "Vaccine_profile_assumptions.xlsx"),
sheet = "Vaccine profile _ input")
vaccine_profile_dt <-
create_vaccine_profile_table(vaccine_profile = vaccine_profile_file,
vaccine_profile_file = file.path("tables", "vaccine_profile.csv"))
combined_dt <-
create_combined_table(death_burden_dt          = death_burden_dt,
vaccine_profile_dt       = vaccine_profile_dt,
susceptible_burden_file  = file.path("tables", "susceptible_burden.csv"),
attributable_burden_file = file.path("tables", "attributable_burden.csv"),
associated_burden_file   = file.path("tables", "associated_burden.csv"))
# create combined table: vaccine profile + disease burden (DALYs)
# create separate burden file for health burdens attributable to AMR and associated with AMR
daly_combined_dt <-
create_combined_table(death_burden_dt          = daly_burden_dt,
vaccine_profile_dt       = vaccine_profile_dt,
susceptible_burden_file  = file.path("tables", "daly_susceptible_burden.csv"),
attributable_burden_file = file.path("tables", "daly_attributable_burden.csv"),
associated_burden_file   = file.path("tables", "daly_associated_burden.csv"))
# ------------------------------------------------------------------------------
estimate_prevaccination_burden(
burden_input = read_csv(file.path("tables", "associated_burden.csv")),
burden_file  = file.path("tables", "associated_burden.csv"))
estimate_prevaccination_burden(
burden_input = read_csv(file.path("tables", "attributable_burden.csv")),
burden_file  = file.path("tables", "attributable_burden.csv"))
estimate_prevaccination_burden(
burden_input = read_csv(file.path("tables", "susceptible_burden.csv")),
burden_file  = file.path("tables", "susceptible_burden.csv"))
estimate_prevaccination_burden(
burden_input = read_csv(file.path("tables", "daly_associated_burden.csv")),
burden_file  = file.path("tables", "daly_associated_burden.csv"))
estimate_prevaccination_burden(
burden_input = read_csv(file.path("tables", "daly_attributable_burden.csv")),
burden_file  = file.path("tables", "daly_attributable_burden.csv"))
estimate_prevaccination_burden(
burden_input = read_csv(file.path("tables", "daly_susceptible_burden.csv")),
burden_file  = file.path("tables", "daly_susceptible_burden.csv"))
pathogenlist_death <- unique(death_burden_dt$Pathogen)
pathogenlist_daly  <- unique(daly_burden_dt$Pathogen)
lapply(pathogenlist_death, create_burden_by_pathogen_graph,
input_data = combined_dt, ylabel = "Number of Death Associated with AMR",
burden_type = "deaths")
lapply(pathogenlist_daly, create_burden_by_pathogen_graph,
input_data = daly_combined_dt, ylabel = "Number of DALY Associated with AMR",
burden_type = "dalys")
pathogenlist_daly
